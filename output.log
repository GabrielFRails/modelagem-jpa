docker build -t modelagem-orm .
docker run -it --rm modelagem-orm
00:15:00.686 [main] INFO  br.ufg.inf.tutorial.Main - === Iniciando Tutorial de Modelagem ORM com JPA/Hibernate ===
00:15:00.687 [main] INFO  br.ufg.inf.tutorial.Main - Testando conexão com o banco de dados...
00:15:00.687 [main] INFO  br.ufg.inf.tutorial.util.JPAUtil - Inicializando EntityManagerFactory...
00:15:00.727 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: tutorial-jpa]
00:15:00.743 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version [WORKING]
00:15:00.755 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
00:15:01.838 [main] WARN  o.hibernate.orm.connections.pooling - HHH10001002: Using built-in connection pool (not intended for production use)
00:15:01.839 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Loaded JDBC driver class: org.h2.Driver
00:15:01.839 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001012: Connecting with JDBC URL [jdbc:h2:mem:tutorial;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE]
00:15:01.839 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001001: Connection properties: {password=****, user=sa}
00:15:01.839 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001003: Autocommit mode: false
00:15:01.840 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001115: Connection pool size: 20 (min=1)
00:15:01.916 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
00:15:02.104 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator null
00:15:02.434 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
00:15:02.441 [main] DEBUG org.hibernate.SQL - 
    drop table if exists disciplinas cascade 
Hibernate: 
    drop table if exists disciplinas cascade 
00:15:02.442 [main] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@5e4b62f9] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
00:15:02.443 [main] DEBUG org.hibernate.SQL - 
    drop table if exists estudantes cascade 
Hibernate: 
    drop table if exists estudantes cascade 
00:15:02.444 [main] DEBUG org.hibernate.SQL - 
    drop table if exists matriculas cascade 
Hibernate: 
    drop table if exists matriculas cascade 
00:15:02.444 [main] DEBUG org.hibernate.SQL - 
    drop table if exists perfis_usuarios cascade 
Hibernate: 
    drop table if exists perfis_usuarios cascade 
00:15:02.444 [main] DEBUG org.hibernate.SQL - 
    drop table if exists professores cascade 
Hibernate: 
    drop table if exists professores cascade 
00:15:02.444 [main] DEBUG org.hibernate.SQL - 
    drop table if exists turmas cascade 
Hibernate: 
    drop table if exists turmas cascade 
00:15:02.444 [main] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists usuarios cascade 
00:15:02.447 [main] DEBUG org.hibernate.SQL - 
    create table disciplinas (
        id bigint generated by default as identity,
        codigo varchar(255) not null unique,
        ementa TEXT,
        titulo varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table disciplinas (
        id bigint generated by default as identity,
        codigo varchar(255) not null unique,
        ementa TEXT,
        titulo varchar(255) not null,
        primary key (id)
    )
00:15:02.448 [main] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@7986cffd] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
00:15:02.453 [main] DEBUG org.hibernate.SQL - 
    create table estudantes (
        id bigint not null,
        matricula varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table estudantes (
        id bigint not null,
        matricula varchar(255) not null unique,
        primary key (id)
    )
00:15:02.454 [main] DEBUG org.hibernate.SQL - 
    create table matriculas (
        estudante_id bigint,
        id bigint generated by default as identity,
        turma_id bigint,
        status varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table matriculas (
        estudante_id bigint,
        id bigint generated by default as identity,
        turma_id bigint,
        status varchar(255) not null,
        primary key (id)
    )
00:15:02.455 [main] DEBUG org.hibernate.SQL - 
    create table perfis_usuarios (
        id bigint generated by default as identity,
        usuario_id bigint unique,
        endereco varchar(255),
        foto varbinary(255),
        telefone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table perfis_usuarios (
        id bigint generated by default as identity,
        usuario_id bigint unique,
        endereco varchar(255),
        foto varbinary(255),
        telefone varchar(255),
        primary key (id)
    )
00:15:02.456 [main] DEBUG org.hibernate.SQL - 
    create table professores (
        id bigint not null,
        identificacao_funcional varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table professores (
        id bigint not null,
        identificacao_funcional varchar(255) not null unique,
        primary key (id)
    )
00:15:02.457 [main] DEBUG org.hibernate.SQL - 
    create table turmas (
        alunosMatriculados integer,
        vagasDisponiveis integer,
        disciplina_id bigint,
        id bigint generated by default as identity,
        professor_id bigint,
        codigo varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table turmas (
        alunosMatriculados integer,
        vagasDisponiveis integer,
        disciplina_id bigint,
        id bigint generated by default as identity,
        professor_id bigint,
        codigo varchar(255) not null unique,
        primary key (id)
    )
00:15:02.458 [main] DEBUG org.hibernate.SQL - 
    create table usuarios (
        data_de_nascimento date,
        id bigint generated by default as identity,
        login varchar(255) not null unique,
        nome_completo varchar(255) not null,
        senha varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table usuarios (
        data_de_nascimento date,
        id bigint generated by default as identity,
        login varchar(255) not null unique,
        nome_completo varchar(255) not null,
        senha varchar(255) not null,
        primary key (id)
    )
00:15:02.460 [main] DEBUG org.hibernate.SQL - 
    alter table if exists estudantes 
       add constraint FK52wcmqh3sytdt2k0khp9l6gly 
       foreign key (id) 
       references usuarios
Hibernate: 
    alter table if exists estudantes 
       add constraint FK52wcmqh3sytdt2k0khp9l6gly 
       foreign key (id) 
       references usuarios
00:15:02.465 [main] DEBUG org.hibernate.SQL - 
    alter table if exists matriculas 
       add constraint FKtf7cpb226x7dln7gcxjbm2sk2 
       foreign key (estudante_id) 
       references estudantes
Hibernate: 
    alter table if exists matriculas 
       add constraint FKtf7cpb226x7dln7gcxjbm2sk2 
       foreign key (estudante_id) 
       references estudantes
00:15:02.466 [main] DEBUG org.hibernate.SQL - 
    alter table if exists matriculas 
       add constraint FK1o9091wci3fkpenss0fj38w3a 
       foreign key (turma_id) 
       references turmas
Hibernate: 
    alter table if exists matriculas 
       add constraint FK1o9091wci3fkpenss0fj38w3a 
       foreign key (turma_id) 
       references turmas
00:15:02.467 [main] DEBUG org.hibernate.SQL - 
    alter table if exists perfis_usuarios 
       add constraint FKtagnx3y84nivbl6rl63ou0cqa 
       foreign key (usuario_id) 
       references usuarios
Hibernate: 
    alter table if exists perfis_usuarios 
       add constraint FKtagnx3y84nivbl6rl63ou0cqa 
       foreign key (usuario_id) 
       references usuarios
00:15:02.468 [main] DEBUG org.hibernate.SQL - 
    alter table if exists professores 
       add constraint FKkic4pc0jmsx1rhlqgoy1ku7ce 
       foreign key (id) 
       references usuarios
Hibernate: 
    alter table if exists professores 
       add constraint FKkic4pc0jmsx1rhlqgoy1ku7ce 
       foreign key (id) 
       references usuarios
00:15:02.469 [main] DEBUG org.hibernate.SQL - 
    alter table if exists turmas 
       add constraint FKi4ox7fm11kylu25gn9ea5ew6y 
       foreign key (disciplina_id) 
       references disciplinas
Hibernate: 
    alter table if exists turmas 
       add constraint FKi4ox7fm11kylu25gn9ea5ew6y 
       foreign key (disciplina_id) 
       references disciplinas
00:15:02.470 [main] DEBUG org.hibernate.SQL - 
    alter table if exists turmas 
       add constraint FKo3w9f6g12te764lopolc63tha 
       foreign key (professor_id) 
       references professores
Hibernate: 
    alter table if exists turmas 
       add constraint FKo3w9f6g12te764lopolc63tha 
       foreign key (professor_id) 
       references professores
00:15:02.473 [main] INFO  br.ufg.inf.tutorial.util.JPAUtil - EntityManagerFactory inicializado com sucesso!
00:15:02.489 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager criado com sucesso
00:15:02.508 [main] DEBUG org.hibernate.SQL - 
    /* dynamic native SQL query */ SELECT
        1 as teste
Hibernate: 
    /* dynamic native SQL query */ SELECT
        1 as teste
00:15:02.519 [main] INFO  br.ufg.inf.tutorial.Main - Conexão testada com sucesso! Resultado: 1
00:15:02.520 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager fechado com sucesso
00:15:02.520 [main] INFO  br.ufg.inf.tutorial.Main - Testando persistência de um Estudante... Gabriel Freitas
00:15:02.521 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager criado com sucesso
00:15:02.521 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - Transação iniciada
00:15:02.528 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        usuarios (data_de_nascimento, login, nome_completo, senha, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        usuarios (data_de_nascimento, login, nome_completo, senha, id) 
    values
        (?, ?, ?, ?, default)
00:15:02.531 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        estudantes (matricula, id) 
    values
        (?, ?)
Hibernate: 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        estudantes (matricula, id) 
    values
        (?, ?)
00:15:02.533 [main] INFO  br.ufg.inf.tutorial.Main - Estudante salvo com ID: 1
00:15:02.536 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - Transação confirmada (commit)
00:15:02.536 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager fechado com sucesso
00:15:02.536 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager criado com sucesso
00:15:02.536 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - Transação iniciada
00:15:02.536 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        usuarios (data_de_nascimento, login, nome_completo, senha, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        usuarios (data_de_nascimento, login, nome_completo, senha, id) 
    values
        (?, ?, ?, ?, default)
00:15:02.538 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        estudantes (matricula, id) 
    values
        (?, ?)
Hibernate: 
    /* insert for
        br.ufg.inf.tutorial.Estudante */insert 
    into
        estudantes (matricula, id) 
    values
        (?, ?)
00:15:02.538 [main] INFO  br.ufg.inf.tutorial.Main - Estudante salvo com ID: 2
00:15:02.539 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - Transação confirmada (commit)
00:15:02.539 [main] DEBUG br.ufg.inf.tutorial.util.JPAUtil - EntityManager fechado com sucesso
00:15:02.539 [main] INFO  br.ufg.inf.tutorial.Main - === Tutorial executado com sucesso! ===
00:15:02.539 [main] INFO  br.ufg.inf.tutorial.util.JPAUtil - Fechando EntityManagerFactory...
00:15:02.539 [main] DEBUG org.hibernate.SQL - 
    drop table if exists disciplinas cascade 
Hibernate: 
    drop table if exists disciplinas cascade 
00:15:02.540 [main] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@69eaa3ec] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
00:15:02.541 [main] DEBUG org.hibernate.SQL - 
    drop table if exists estudantes cascade 
Hibernate: 
    drop table if exists estudantes cascade 
00:15:02.542 [main] DEBUG org.hibernate.SQL - 
    drop table if exists matriculas cascade 
Hibernate: 
    drop table if exists matriculas cascade 
00:15:02.542 [main] DEBUG org.hibernate.SQL - 
    drop table if exists perfis_usuarios cascade 
Hibernate: 
    drop table if exists perfis_usuarios cascade 
00:15:02.543 [main] DEBUG org.hibernate.SQL - 
    drop table if exists professores cascade 
Hibernate: 
    drop table if exists professores cascade 
00:15:02.543 [main] DEBUG org.hibernate.SQL - 
    drop table if exists turmas cascade 
Hibernate: 
    drop table if exists turmas cascade 
00:15:02.544 [main] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
Hibernate: 
    drop table if exists usuarios cascade 
00:15:02.547 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001008: Cleaning up connection pool [jdbc:h2:mem:tutorial;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE]
00:15:02.547 [main] INFO  br.ufg.inf.tutorial.util.JPAUtil - EntityManagerFactory fechado com sucesso!
00:15:02.547 [main] INFO  br.ufg.inf.tutorial.Main - === Recursos liberados. Fim do tutorial. ===
